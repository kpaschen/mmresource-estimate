{
	"agent": {
		"metrics_collection_interval": 60,
        "logfile": "/opt/aws/amazon-cloudwatch-agent/logs/amazon-cloudwatch-agent.log",
		"run_as_user": "root"
	},
	"logs": {
		"logs_collected": {
			"files": {
				"collect_list": [
					{
						"file_path": "/var/log/nginx/access.log",
						"log_group_name": "mattermost.access.log",
						"log_stream_name": "mattermost.access.log",
                        "timezone": "UTC",
						"retention_in_days": 60,
                        "timestamp_format": "%Y-%m-%d-%H:%M:%S"
					},
					{
						"file_path": "/var/log/nginx/error.log",
						"log_group_name": "mattermost.error.log",
						"log_stream_name": "mattermost.error.log",
						"timezone": "UTC",
						"retention_in_days": 60,
                        "timestamp_format": "%Y-%m-%d-%H:%M:%S"
					}
				]
			}
		},
        "log_stream_name": "MattermostLogStream",
        "force_flush_interval" : 60
	},
	"metrics": {
        "namespace": "MM_Logs",
        "metrics_collected": {
          "disk": {
            "measurement": [
              "used_percent"
            ],
            "metrics_collection_interval": 60,
            "resources": [
              "*"
            ]
          },
          "mem": {
            "measurement": [
              "mem_used_percent"
            ],
            "metrics_collection_interval": 60
          }
        },
          "append_dimensions": {
            "ImageId": "${aws:ImageId}",
            "InstanceId": "${aws:InstanceId}",
            "InstanceType": "${aws:InstanceType}"
          },
          "aggregation_dimensions" : [["ImageId"], ["InstanceId", "InstanceType"], ["d1"],[]],
          "force_flush_interval" : 60
    }
}